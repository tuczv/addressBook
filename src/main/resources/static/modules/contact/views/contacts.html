<div layout="column" layout>
    <md-whiteframe class="md-whiteframe-z2">

        <md-toolbar class="md-hue-1 md-whiteframe-z2" ng-hide="options.rowSelection && selected.length"
                    ng-show="!options.showSearch" style="">
            <div class="md-toolbar-tools">
                <md-button aria-label="Contacts" class="md-icon-button">
                    <ng-md-icon icon="my_library_books" style="fill: black"></ng-md-icon>
                </md-button>
                <h3>
                    {{'CONTACTS' | translate}}
                </h3>
                <span flex></span>

                <md-menu>
                    <md-button class="md-icon-button" ng-click="$mdOpenMenu()">
                        <md-tooltip>Sort</md-tooltip>
                        <ng-md-icon icon="group"></ng-md-icon>
                    </md-button>
                    <md-menu-content width="4">
                        <md-menu-item ng-repeat="group in groups">
                            <md-button class="md-button" ng-click="filters.group = group.name">{{group.name}}
                            </md-button>
                        </md-menu-item>
                        <md-button class="md-button" ng-click="filters.group = undefined"><h6>{{'CLEAN' |
                            translate}}</h6></md-button>
                    </md-menu-content>
                </md-menu>

                <md-menu>
                    <md-button aria-label="Select" class="md-icon-button" ng-click="$mdOpenMenu()">
                        <md-tooltip>export & import contacs</md-tooltip>
                        <ng-md-icon icon="import_export"></ng-md-icon>
                    </md-button>
                    <md-menu-content width="4">
                        <md-menu-item>
                            <md-button ng-click="exportData()">{{'EXPORT' | translate}}</md-button>
                        </md-menu-item>
                        <md-menu-item>
                            <input class="ng-hide" file-reader="csv" id="input-file-id" multiple type="file"/>
                            <label class="md-button md-raised md-primary" for="input-file-id">{{'SELECT' |
                                translate}}</label>

                        </md-menu-item>
                        <md-menu-item>
                            <md-button ng-click="uploadFile(csv)">{{'IMPORT' | translate}}</md-button>

                        </md-menu-item>
                    </md-menu-content>
                </md-menu>


                <md-button class="md-icon-button md-primary md-button md-ink-ripple"
                           ng-click="options.showSearch = !options.showSearch">
                    <md-tooltip>Find</md-tooltip>
                    <ng-md-icon icon="search"></ng-md-icon>
                </md-button>
            </div>
        </md-toolbar>

        <md-toolbar class="md-hue-1 md-whiteframe-z2" ng-show="options.showSearch" style="background:white">
            <div class="md-toolbar-tools">
                <md-button aria-label="Back" class="md-icon-button md-primary md-button md-ink-ripple"
                           ng-click="options.showSearch = !options.showSearch">
                    <ng-md-icon icon="arrow_back" ng-click="resetFilter()"></ng-md-icon>
                </md-button>
                <md-input-container flex md-theme="input" style="width: 300px; margin-top: 40px; margin-right: 5px;">
                    <label>&nbsp;</label>
                    <input class="md-body-1" ng-model="searchInput" placeholder="{{'FIND' | translate}}">
                </md-input-container>
                <md-button aria-label="Search" class="md-icon-button md-primary md-button md-ink-ripple"
                           ng-click="options.showSearch = !options.showSearch">
                    <ng-md-icon icon="search"></ng-md-icon>
                </md-button>
            </div>

        </md-toolbar>

        <md-toolbar class="md-hue-1 md-whiteframe-z2" ng-show="options.rowSelection && selected.length"
                    style="background:white">
            <div class="md-toolbar-tools">
                <span class="md-body-1">{{selected.length}} {{selected.length > 1 ? 'pozycje' : 'pozycja'}} zaznaczone</span>

                <span flex></span>
                <md-button class="md-button md-raised md-primary" ng-click="openDeleteSelected($event, selected)">
                    {{'DELETE' | translate}}
                </md-button>
            </div>
        </md-toolbar>

        <md-content>
            <md-table-container>

                <table id="table" md-progress="promise" md-row-select="options.rowSelection" md-table
                       multiple="{{options.multiSelect}}" ng-model="selected">
                    <!--md-on-close: expression; multiple:boolean; placeholder: string;-->
                    <thead md-head md-on-reorder="contacts"
                           md-order="$root.tableFilter.order">
                    <tr md-row>
                        <th md-column></th>
                        <th md-column md-order-by="name">{{'NAME' | translate}}</th>
                        <th md-column md-order-by="lastName">{{'LASTNAME' | translate}}</th>
                        <th md-column md-order-by="email">{{'EMAIL' | translate}}</th>
                        <th md-column md-numeric="phone">{{'PHONE' | translate}}</th>
                        <th md-column md-order-by="group">{{'GROUP' | translate}}</th>

                    </tr>
                    </thead>

                    <tbody md-body>
                    <tr md-on-select="selectItem"
                        md-row
                        md-select="contact"
                        ng-click="clickEdit(contact, $event)"
                        ng-repeat="contact in contacts
                                    | filter: filters
                            		| orderBy: $root.tableFilter.order
                            		| filter:  searchInput
                            		| limitTo: $root.tableFilter.limit: ($root.tableFilter.page - 1) * $root.tableFilter.limit">

                        <td md-cell>
                            <ng-letter-avatar avatarcustombgcolor="#D84315" data={{contact.name}} fontsize="15"
                                              height="30"
                                              shape="round" width="30"></ng-letter-avatar>
                        </td>
                        <td md-cell>{{contact.name}}</td>
                        <td md-cell>{{contact.lastName}}</td>
                        <td md-cell>{{contact.email}}</td>
                        <td md-cell>{{contact.phone}}</td>
                        <td md-cell>{{contact.group}}</td>

                    </tr>
                    </tbody>
                </table>

            </md-table-container>
            <md-table-pagination md-boundary-links
                                 md-limit="$root.tableFilter.limit" md-limit-options="[10, 20, 30, 40, 50]"
                                 md-on-paginate="onPageChange" md-page="$root.tableFilter.page"
                                 md-total="{{contacts.length}}">
            </md-table-pagination>
        </md-content>

        <md-button aria-label="Nowy message" class="md-fab md-fab-bottom-right"
                   ng-click="clickAdd($event)">
            <ng-md-icon icon="add" style="fill: white"></ng-md-icon>
        </md-button>

    </md-whiteframe>
</div>

<md-dialog aria-label="Nowa wiadomość" flex="40" ng-cloak>
    <md-dialog-content class="md-padding">
        <form name="createForm" ng-submit="createNews()">
            <div layout layout-sm="column">
                <md-input-container>
                    <label>{{'FROM' | translate}}</label>
                    <input disabled ng-model="email.userFrom.username">
                </md-input-container>

                <md-input-container flex
                                    md-is-error="createForm.userTo.$invalid && (createForm.$submitted || createForm.userTo.$dirty)">
                    <label>{{'TO' | translate}}</label>
                    <md-select id="userTo"
                               name="userTo"
                               ng-model="email.userTo"
                               required>
                        <md-option ng-repeat="user in users" required>{{user.username}}</md-option>
                    </md-select>
                    <div ng-if="createForm.userTo.$touched" ng-messages="createForm.userTo.$error">
                        <div ng-message="required">Podaj co najmniej jednego odbiorcę</div>
                    </div>
                </md-input-container>
            </div>

            <div layout layout-sm="column">
                <md-input-container flex
                                    md-is-error="createForm.subject.$invalid && (createForm.$submitted || createForm.subject.$dirty)">
                    <label>{{'NAME' | translate}}</label>
                    <input id="subject"
                           md-maxlength="25"
                           md-minlength="3"
                           name="subject"
                           ng-model="email.subject"
                           required>
                    <div ng-if="createForm.subject.$touched" ng-messages="createForm.subject.$error">
                        <div ng-message="required">Temat wiadomości jest obowiązkowy</div>
                    </div>
                </md-input-container>
            </div>

            <md-input-container class="md-block">
                <label>{{'BODY' | translate}}</label>
                <textarea md-maxlength="200" md-select-on-focus ng-model="email.body" rows="3"></textarea>
            </md-input-container>

    </md-dialog-content>

    <md-dialog-action layout="row">
        <span flex></span>
        <md-button ng-click="cancelAddModal()">{{'BACK' | translate}}</md-button>
        <md-button class="md-raised md-warn" ng-disabled="createForm.$invalid" type="submit">{{'SEND' | translate}}
        </md-button>
    </md-dialog-action>
    </form>
</md-dialog>

